---
import { Image as AstroImage } from "astro:assets";

import { type LocalImageProps, type RemoteImageProps } from "astro:assets";

type Props = (RemoteImageProps | LocalImageProps) & {
    caption?: string;
};

const { src, width, height, caption, ...props } = Astro.props;
---

<style>
    img {
        height: auto;
        width: auto;

        max-height: 100%;
        max-width: 100%;

        border-radius: var(--radiusMd);

        object-fit: contain;

        filter: drop-shadow(0 25px 25px rgb(0 0 0 / 0.05));
    }

    .caption {
        font-size: var(--fontSizeSm);
        color: var(--colorTextSecondary);
    }

    @media (prefers-color-scheme: dark) {
        img {
            filter: none;
        }
    }
</style>

<div>
    <!-- @ts-ignore -->
    <AstroImage alt="" src={src} width={width} height={height} {...props} />
    {caption ? <span class="caption">{caption}</span> : null}
</div>
